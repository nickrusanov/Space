"use strict";var menuCurrentId,categoryItems,moreBtn,categoryButtons,subcategoryLists,dropIcons,priceInputs,priceResets,ratingBtn,ratingBox,ratingLabels,ratingDropIcon,ratingBoxShowToggle,favButtons,favIcons,cartButtons,cartIcons,cartCountShow,searchBtn=document.querySelector(".search__btn"),search=document.querySelector(".search"),header=document.querySelector(".header"),themeSystemBtn=(searchBtn.addEventListener("click",function(){search.classList.toggle("search--mobile-hide"),header.classList.toggle("header--mobile-hide")}),document.getElementById("theme-system-btn")),themeLightBtn=document.getElementById("theme-light-btn"),themeDarkBtn=document.getElementById("theme-dark-btn"),mediaDark=window.matchMedia("(prefers-color-scheme: dark)"),menuThemeText=document.getElementById("theme-text"),logo=document.querySelector(".header__logo-link"),themeSet=function(e){localStorage.getItem("theme")||mediaDark.removeEventListener("change",systemThemeModeSet),localStorage.setItem("theme",e),"dark"===e?(document.documentElement.classList.add("darkmode"),menuThemeText.innerHTML="Тема: тёмная",logo.innerHTML='<picture><source srcset="./img/logo-darkmode.webp" type="image/webp"><img class="header__logo" src="./img/logo-darkmode.png" alt="logo"></picture>'):(document.documentElement.classList.remove("darkmode"),menuThemeText.innerHTML="Тема: светлая",logo.innerHTML='<picture><source srcset="./img/logo.webp" type="image/webp"><img class="header__logo" src="./img/logo.png" alt="logo"></picture>')},systemThemeSet=function(){systemThemeModeSet(),menuThemeText.innerHTML="Тема: как у системы",localStorage.getItem("theme")&&(localStorage.removeItem("theme"),mediaDark.addEventListener("change",systemThemeModeSet))},systemThemeModeSet=function(){mediaDark.matches?(document.documentElement.classList.add("darkmode"),logo.innerHTML='<picture><source srcset="./img/logo-darkmode.webp" type="image/webp"><img class="header__logo" src="./img/logo-darkmode.png" alt="logo"></picture>'):(document.documentElement.classList.remove("darkmode"),logo.innerHTML='<picture><source srcset="./img/logo.webp" type="image/webp"><img class="header__logo" src="./img/logo.png" alt="logo"></picture>')},themeIconCreat=function(){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");return e.setAttribute("class","header__theme-icon"),e.setAttribute("viewBox","0 0 24 24"),e.innerHTML='<path d="M23 5.78747L7.91429 21L1 14.0276L2.77257 12.2401L7.91429 17.4124L21.2274 4L23 5.78747Z"/>',e},themeSetByBtn=function(e){document.querySelector("header__theme-icon")&&document.querySelector("header__theme-icon").remove(),themeLightBtn.contains(e.target)?(themeSet("light"),menuClose(),themeLightBtn.prepend(themeIcon)):themeDarkBtn.contains(e.target)?(themeSet("dark"),menuClose(),themeDarkBtn.prepend(themeIcon)):themeSystemBtn.contains(e.target)&&(systemThemeSet(),menuClose(),themeSystemBtn.prepend(themeIcon))},themeInit=function(){"dark"===localStorage.getItem("theme")?(document.documentElement.classList.add("darkmode"),menuThemeText.innerHTML="Тема: тёмная",themeDarkBtn.prepend(themeIcon),logo.innerHTML='<picture><source srcset="./img/logo-darkmode.webp" type="image/webp"><img class="header__logo" src="./img/logo-darkmode.png" alt="logo"></picture>'):"light"===localStorage.getItem("theme")?(menuThemeText.innerHTML="Тема: светлая",themeLightBtn.prepend(themeIcon),logo.innerHTML='<picture><source srcset="./img/logo.webp" type="image/webp"><img class="header__logo" src="./img/logo.png" alt="logo"></picture>'):(mediaDark.addEventListener("change",systemThemeModeSet),themeSystemBtn.prepend(themeIcon),systemThemeModeSet())},themeIcon=themeIconCreat(),menuArray=(themeInit(),document.querySelectorAll(".header__menu")),menuMain=document.getElementById("menu-main"),menuTheme=document.getElementById("menu-theme"),avatarBtn=document.querySelector(".header__avatar-btn"),themeBtn=document.getElementById("theme-btn"),backBtn=document.querySelector(".header__back-btn"),menuOpen=function(){menuArray[menuCurrentId=0].classList.add("header__menu--open"),document.addEventListener("click",menuClickCheck),document.addEventListener("keydown",menuKeyCheck)},menuClose=function(){menuArray[menuCurrentId].classList.remove("header__menu--open"),document.removeEventListener("click",menuClickCheck),document.removeEventListener("keydown",menuKeyCheck)},menuClickCheck=function(e){menuArray[menuCurrentId].contains(e.target)||avatarBtn.contains(e.target)?backBtn.contains(e.target)?(menuArray[menuCurrentId].classList.remove("header__menu--open"),setTimeout(function(){return menuArray[menuCurrentId=0].classList.add("header__menu--open")},200)):themeBtn.contains(e.target)?(menuArray[menuCurrentId].classList.remove("header__menu--open"),setTimeout(function(){return menuArray[menuCurrentId=1].classList.add("header__menu--open")},200)):menuArray[1].contains(e.target)&&themeSetByBtn(e):menuClose()},menuKeyCheck=function(e){27===e.keyCode&&menuClose()};avatarBtn.addEventListener("click",function(){(0===document.querySelectorAll(".header__menu--open").length?menuOpen:menuClose)()}),document.querySelector(".product")&&(categoryItems=document.querySelectorAll(".product__category-item"),moreBtn=document.querySelector(".product__more"),categoryButtons=document.querySelectorAll(".product__category-btn"),subcategoryLists=document.querySelectorAll(".product__subcategory-list"),dropIcons=document.querySelectorAll(".product__drop-svg"),moreBtn.addEventListener("click",function(){categoryItems.forEach(function(e,t){4<t&&e.classList.toggle("product__category-item--hidden")}),moreBtn.blur(),categoryItems[categoryItems.length-1].classList.contains("product__category-item--hidden")?moreBtn.innerHTML="Показать все":moreBtn.innerHTML="Скрыть"}),categoryButtons.forEach(function(e,t){e.addEventListener("click",function(){subcategoryLists[t].classList.toggle("product__subcategory-list--hidden"),dropIcons[t].classList.toggle("product__drop-svg--rotate")})}),priceInputs=document.querySelectorAll(".product__price-input"),priceResets=document.querySelectorAll(".product__price-reset"),priceInputs.forEach(function(e,t){e.addEventListener("keyup",function(){0<e.value.length?priceResets[t].classList.add("product__price-reset--visible"):priceResets[t].classList.remove("product__price-reset--visible")})}),priceResets.forEach(function(e,t){e.addEventListener("click",function(){priceInputs[t].value=""})}),ratingBtn=document.querySelector(".product__rating-btn"),ratingBox=document.querySelector(".product__rating-box"),ratingLabels=document.querySelectorAll(".product__rating-label"),ratingDropIcon=document.querySelector(".product__drop-svg--rating"),ratingBoxShowToggle=function(){ratingBox.classList.toggle("product__rating-box--visible"),ratingDropIcon.classList.toggle("product__drop-svg--rotate")},ratingBtn.addEventListener("click",ratingBoxShowToggle),ratingLabels.forEach(function(e,t){e.addEventListener("click",function(){ratingBoxShowToggle(),ratingBtn.innerHTML='<img class="product__rating-img product__rating-img--selected" src="./img/stars/stars-'.concat(t,'.png"alt="rating: ').concat(t,'"><svg class="product__drop-svg product__drop-svg--rating" fill="currentColor" viewBox="0 0 14 9" xmlns="http://www.w3.org/2000/svg"><path d="M7 9L0 2.2496L2.33443 0L7 4.5008L11.6656 0L14 2.2496L7 9Z" /></svg>')})}),favButtons=document.querySelectorAll(".product__item-fav"),favIcons=document.querySelectorAll(".product__item-fav-svg"),favButtons.forEach(function(e,t){e.addEventListener("click",function(e){e.preventDefault(),favIcons[t].classList.toggle("product__item-fav-svg--active")})}),cartButtons=document.querySelectorAll(".product__item-cart"),cartIcons=document.querySelectorAll(".product__item-cart-svg"),cartButtons.forEach(function(e,t){e.addEventListener("click",function(e){cartIcons[t].classList.toggle("product__item-cart-svg--active"),cartCountShow(e)})}),cartCountShow=function(e){var t=document.querySelectorAll(".product__item-cart-svg--active").length,n=document.getElementById("cart");e.preventDefault(),t?(n.classList.add("header__icon-counter--active"),n.innerHTML=t):(n.classList.remove("header__icon-counter--active"),n.innerHTML="")});